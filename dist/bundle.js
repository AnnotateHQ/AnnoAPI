var t=Object.defineProperty,e=(e,i,s)=>(((e,i,s)=>{i in e?t(e,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[i]=s})(e,"symbol"!=typeof i?i+"":i,s),s);const i=new class{constructor(){e(this,"window")}openContent(t,e=!1){return e||this.window?.close(),this.window=window.open(null,"_blank"),this.window.document.write(t),this.window}open({title:t="Error",icon:e="",frame:i="",disableClose:s=!1}){return this.openContent(`<html><head><title>${t}</title><link rel="icon" href="${e}"></head><body style="margin:0;"><iframe src="${i}" width="100%" height="100%" style="border:none;" /></body></html>`,s)}close(){return this.window?.close(),this.window}},s=new class{constructor(t=document.title,i=this.getIcon()){e(this,"title"),e(this,"icon"),e(this,"presets",{"google classroom":{title:"Classes",icon:"https://annotate.lol/assets/logos/classroom.png"},google:{title:"Google",icon:"https://annotate.lol/assets/logos/google.png"},"google docs":{title:"Google Docs",icon:"https://annotate.lol/assets/logos/docs.ico"},"google drive":{title:"Google Drive",icon:"https://annotate.lol/assets/logos/drive.png"}}),this.title=t,this.icon=i}getIcon(){let t=[...document.querySelectorAll("link")].filter((t=>"icon"===t.rel||"shortcut icon"===t.rel));return t.length?t.length>1?t.map((t=>t.href)):t[0].href:"/favicon.ico"}getTitle(){return this.title!==document.title&&(this.title=document.title),this.title}setTitle(t){if(this.getTitle()!==t)return document.title=t,this.getTitle()}setIcon(t,e="annoicon",i="icon"){[...document.querySelectorAll("link")].filter((t=>"icon"===t.rel||"shortcut icon"===t.rel)).forEach((t=>t.remove()));const s=document.createElement("link");return s.rel=i,s.id=e,s.href=t,document.head.appendChild(s),document.querySelector("#"+e)}usePreset(t){if("string"==typeof t){if(!this.presets[t])return!1;t=this.presets[t]}return this.setIcon(t.icon),this.setTitle(t.title),{title:this.getTitle(),icon:this.getIcon()}}set({title:t,icon:e}){return this.setTitle(t),this.setIcon(e),{title:this.getTitle(),icon:this.getIcon()}}},o=new class{constructor(t="`",i="https://google.com"){e(this,"key"),e(this,"link"),this.key=t,this.link=i,document.body.addEventListener("keydown",(t=>{if(t.key.toLowerCase()===this.getKey().toLowerCase()){const t=/^(http(s)?:\/\/)?([\w-]+\.)+[\w]{2,}(\/.*)?$/.test(this.getLink())?this.getLink().startsWith("http://")||this.getLink().startsWith("https://")?this.getLink():"https://"+this.getLink():"https://google.com/search?q="+encodeURIComponent(this.getLink());top.location.href=t}}))}getKey(){return this.key}getLink(){return this.link}setKey(t){return this.key=t,this.key}setLink(t){return this.link=t,this.link}get(){return{key:this.getKey(),link:this.getLink()}}set({key:t,link:e}){return this.setKey(t),this.setLink(e),{key:this.getKey(),link:this.getLink()}}force(){const t=/^(http(s)?:\/\/)?([\w-]+\.)+[\w]{2,}(\/.*)?$/.test(this.getLink())?this.getLink().startsWith("http://")||this.getLink().startsWith("https://")?this.getLink():"https://"+this.getLink():"https://google.com/search?q="+encodeURIComponent(this.getLink());top.location.href=t}},n=new class{constructor(){e(this,"storage",{}),Object.entries(localStorage).forEach((([t,e])=>this.storage[t]=e)),window.addEventListener("beforeunload",(()=>this.refresh()))}refresh(){return Object.keys(localStorage).forEach((t=>delete localStorage[t])),Object.entries(this.storage).forEach((([t,e])=>localStorage.setItem(t,e))),this.storage}get(t){return this.storage[t]}set(t,e){return this.storage[t]=e,this.refresh()}remove(t){return delete this.storage[t],this.refresh()}clear(){return this.storage={},this.refresh()}all(){return this.storage}};(()=>{let t=document.createElement("iframe");t.src="about:blank",t.style="visibility:none;width:1px;height:1px;z-index:-99999999;",document.body.appendChild(t),t.contentWindow.console.log("\n\n\t\t%cAnnotate API has loaded!%c\n\t\t\tVersion: 1.0.0\n\t\t\tMore Information: https://github.com/AnnotateHQ/AnnoAPI\n\n\n","font-size:20px;color:red;font-family:'Monaco';",""),t.remove()})(),window.aapi={aboutblank:i,cloaker:s,file:class{constructor(t,i){e(this,"element"),e(this,"link"),e(this,"fileName"),this.element=document.createElement("a"),t&&(this.link=t),i&&(this.fileName=i)}setLink(t){this.link=t}setFileName(t){this.fileName=t}download(){if(!this.link||!this.fileName)return console.error("Missing either a link or file name for the AAPI download. Use setLink and setFileName to fix this error.");this.element.setAttribute("href","data:text/html;charset=utf-8,"+encodeURIComponent(`<iframe width="100%" height="100%" style="border:0;position:absolute;left:0;top:0;" src="${this.link}"></iframe>`)),this.element.setAttribute("download",this.fileName),this.element.click(),this.element.remove()}},panic:o,storage:n};
